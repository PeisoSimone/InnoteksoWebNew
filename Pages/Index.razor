@page "/"
@using innoteksoWebNew.Models
@using InnoteksoWebNew.Services
@inject IEmailService EmailService
@inject IJSRuntime JSRuntime
@inject NavigationManager Navigation

<!-- Navigation -->
<NavMenu />

<!-- Contact Modal -->
<Modal @ref="contactModal" Title="Get Your Free Quote" IsScrollable="true">
    <BodyTemplate>
        @if (showSuccessMessage)
        {
            <div class="alert alert-success">
                <i class="fas fa-check-circle me-2"></i>
                <strong>Success!</strong> Your message has been sent. We'll get back to you within 24 hours at @contactModel.Email
            </div>
        }
        else if (showErrorMessage)
        {
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong>Error:</strong> @errorMessage
            </div>
        }
        else
        {
            <EditForm Model="contactModel" OnValidSubmit="HandleValidSubmit">
                <DataAnnotationsValidator />

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">First Name <span class="text-danger">*</span></label>
                        <InputText class="form-control" @bind-Value="contactModel.FirstName" placeholder="John" />
                        <ValidationMessage For="@(() => contactModel.FirstName)" class="validation-message" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label">Last Name <span class="text-danger">*</span></label>
                        <InputText class="form-control" @bind-Value="contactModel.LastName" placeholder="Doe" />
                        <ValidationMessage For="@(() => contactModel.LastName)" class="validation-message" />
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Contact Number <span class="text-danger">*</span></label>
                        <InputText class="form-control" @bind-Value="contactModel.ContactNumber" placeholder="+27 81 123 4567" />
                        <ValidationMessage For="@(() => contactModel.ContactNumber)" class="validation-message" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label">Email Address <span class="text-danger">*</span></label>
                        <InputText type="email" class="form-control" @bind-Value="contactModel.Email" placeholder="john.doe@example.com" />
                        <ValidationMessage For="@(() => contactModel.Email)" class="validation-message" />
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Service Interested In</label>
                    <InputSelect class="form-control" @bind-Value="contactModel.ServiceType">
                        <option value="">-- Select a service --</option>

                        <optgroup label="🏠 Smart Home Solutions">
                            <option value="Smart Home - Starter Package">Starter Package (R2,500 - R4,000)</option>
                            <option value="Smart Home - Advanced Package">Advanced Package (R5,000 - R8,000)</option>
                            <option value="Smart Home - Premium Package">Premium Package (R10,000+)</option>
                            <option value="Smart Home - Smart Geyser">Smart Geyser Controller (from R800)</option>
                            <option value="Smart Home - Smart Lighting">Smart Lighting (from R150/bulb)</option>
                            <option value="Smart Home - Smart Plugs">Smart Power Plugs (from R200)</option>
                            <option value="Smart Home - Smart Door Lock">Smart Door Lock (from R1,500)</option>
                            <option value="Smart Home - Security Camera">Security Camera (from R800)</option>
                            <option value="Smart Home - Motion Sensors">Motion Sensors (from R300)</option>
                            <option value="Smart Home - Smart Doorbell">Smart Doorbell (from R1,000)</option>
                            <option value="Smart Home - Smart Blinds">Smart Blinds/Curtains (from R1,500)</option>
                            <option value="Smart Home - Voice Assistant">Voice Assistant Hub (from R500)</option>
                            <option value="Smart Home - Smart Garage">Smart Garage Door (from R1,200)</option>
                            <option value="Smart Home - Water Leak Detector">Water Leak Detector (from R400)</option>
                            <option value="Smart Home - Custom Solution">Custom Smart Home Solution</option>
                        </optgroup>

                        <optgroup label="💻 Web Development">
                            <option value="Web - Starter Website">Starter Website (R3,000 - R5,000)</option>
                            <option value="Web - Professional Website">Professional Website (R6,000 - R12,000)</option>
                            <option value="Web - Enterprise Platform">Enterprise Platform (R16,000+)</option>
                            <option value="Web - E-commerce">E-commerce Website</option>
                            <option value="Web - CMS">Content Management System</option>
                            <option value="Web - Custom Application">Custom Web Application</option>
                            <option value="Web - Landing Page">Landing Page Design</option>
                            <option value="Web - Website Redesign">Website Redesign</option>
                        </optgroup>

                        <optgroup label="📱 Mobile Applications">
                            <option value="Mobile - Basic App">Basic App (R4,000 - R8,000)</option>
                            <option value="Mobile - Professional App">Professional App (R10,000 - R20,000)</option>
                            <option value="Mobile - Enterprise App">Enterprise App (R25,000+)</option>
                            <option value="Mobile - Cross-Platform">Cross-Platform Solution</option>
                            <option value="Mobile - iOS Only">iOS App Development</option>
                            <option value="Mobile - Android Only">Android App Development</option>
                        </optgroup>

                        <optgroup label="☁️ Cloud & AI Solutions">
                            <option value="Cloud - Essentials">Cloud Essentials (R3,000 - R6,000)</option>
                            <option value="Cloud - AI Integration">AI Integration (R8,000 - R15,000)</option>
                            <option value="Cloud - Enterprise">Enterprise Cloud (R20,000+)</option>
                            <option value="Cloud - Migration">Cloud Migration Services</option>
                            <option value="Cloud - Hosting Setup">Cloud Hosting Setup</option>
                            <option value="Cloud - Database">Database Solutions</option>
                        </optgroup>

                        <optgroup label="🛠️ Other Services">
                            <option value="Support - Maintenance">Ongoing Support & Maintenance</option>
                            <option value="Consultation">Technical Consultation</option>
                            <option value="Training">Training & Workshops</option>
                            <option value="Integration">System Integration</option>
                            <option value="Business Automation">Business Process Automation</option>
                            <option value="Other">Other / Not Sure</option>
                        </optgroup>
                    </InputSelect>
                </div>

                <div class="mb-3">
                    <label class="form-label">Tell Us About Your Project <span class="text-danger">*</span></label>
                    <InputTextArea class="form-control" rows="5" @bind-Value="contactModel.Message"
                                   placeholder="Describe what you're looking for, your timeline, budget, or any specific requirements..." />
                    <ValidationMessage For="@(() => contactModel.Message)" class="validation-message" />
                    <small class="text-muted">Minimum 10 characters</small>
                </div>

                <div class="d-flex gap-2 justify-content-end">
                    <button type="button" class="btn btn-secondary" @onclick="CloseModal" disabled="@isSubmitting">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="submit" class="btn btn-primary flex-grow-1" disabled="@isSubmitting">
                        @if (isSubmitting)
                        {
                            <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                            <span>Sending...</span>
                        }
                        else
                        {
                            <span><i class="fas fa-paper-plane me-2"></i>Send Quote Request</span>
                        }
                    </button>
                </div>
            </EditForm>
        }
    </BodyTemplate>
</Modal>

<!-- Smart Home Service Modal -->
<Modal @ref="smartHomeModal" Title="Smart Home Solutions" Size="ModalSize.ExtraLarge" IsScrollable="true">
    <BodyTemplate>
        <div class="service-modal-content">
            <div class="modal-intro">
                <p class="lead">Transform your home with intelligent automation systems that save energy, increase security, and provide ultimate convenience.</p>
            </div>

            <div class="alert alert-info location-notice">
                <i class="fas fa-map-marker-alt me-2"></i>
                <div>
                    <strong>Service Area:</strong> We are based in <strong>Krugersdorp and Pretoria</strong>. Installation is FREE in these areas!
                    For locations outside these areas, a travel/transport fee will apply based on distance.
                </div>
            </div>

            <h4 class="packages-header mb-4">
                <i class="fas fa-box-open me-2"></i>Available Packages
            </h4>

            <div class="custom-suggestions-grid mb-4">
                <!-- Starter Package -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Smart Home - Starter Package")'>
                    <i class="fas fa-lightbulb suggestion-card-icon"></i>
                    <h4>Starter Package</h4>
                    <div class="package-price-modal">R2,500 - R4,000</div>
                    <p>Perfect for beginners wanting to experience smart home technology</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>2-4 Smart devices</li>
                            <li>Voice control setup</li>
                            <li>Basic automation</li>
                            <li>Professional installation</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Advanced Package -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Smart Home - Advanced Package")'>
                    <i class="fas fa-home suggestion-card-icon"></i>
                    <h4>Advanced Package</h4>
                    <div class="package-price-modal">R5,000 - R8,000</div>
                    <p>Comprehensive solution for whole-home automation</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>5-8 Smart devices</li>
                            <li>Advanced scheduling</li>
                            <li>Energy monitoring</li>
                            <li>Security integration</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Premium Package -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Smart Home - Premium Package")'>
                    <i class="fas fa-crown suggestion-card-icon"></i>
                    <h4>Premium Package</h4>
                    <div class="package-price-modal">R10,000+</div>
                    <p>Ultimate smart home experience with all features</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>10+ Smart devices</li>
                            <li>Whole-home automation</li>
                            <li>Premium security</li>
                            <li>Custom integration</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>
            </div>

            <h5 class="individual-products-header mb-3">
                <i class="fas fa-puzzle-piece me-2"></i>Individual Products
            </h5>

            <div class="custom-options-checkboxes">
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Geyser")'>
                    <label>
                        <i class="fas fa-fire"></i>
                        <span>Smart Geyser Controller (from R800)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Lighting")'>
                    <label>
                        <i class="fas fa-lightbulb"></i>
                        <span>Smart Lighting (from R150/bulb)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Plugs")'>
                    <label>
                        <i class="fas fa-plug"></i>
                        <span>Smart Power Plugs (from R200)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Door Lock")'>
                    <label>
                        <i class="fas fa-door-closed"></i>
                        <span>Smart Door Lock (from R1,500)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Security Camera")'>
                    <label>
                        <i class="fas fa-video"></i>
                        <span>Security Camera (from R800)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Motion Sensors")'>
                    <label>
                        <i class="fas fa-running"></i>
                        <span>Motion Sensors (from R300)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Doorbell")'>
                    <label>
                        <i class="fas fa-bell"></i>
                        <span>Smart Doorbell (from R1,000)</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Smart Home - Smart Blinds")'>
                    <label>
                        <i class="fas fa-window-maximize"></i>
                        <span>Smart Blinds/Curtains (from R1,500)</span>
                    </label>
                </div>
            </div>

            <div class="modal-footer-actions mt-4">
                <button class="btn btn-secondary" @onclick="CloseSmartHomeModal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
                <button class="btn btn-primary" @onclick='() => OpenContactModalWithService("Smart Home - Custom Solution")'>
                    <i class="fas fa-rocket me-2"></i>Get Custom Quote
                </button>
            </div>
        </div>
    </BodyTemplate>
</Modal>

<!-- Web Development Service Modal -->
<Modal @ref="webDevModal" Title="Web Development Services" Size="ModalSize.ExtraLarge" IsScrollable="true">
    <BodyTemplate>
        <div class="service-modal-content">
            <div class="modal-intro">
                <p class="lead">Professional websites and web applications designed to elevate your online presence and drive business growth.</p>
            </div>

            <h4 class="packages-header mb-4">
                <i class="fas fa-box-open me-2"></i>Available Packages
            </h4>

            <div class="custom-suggestions-grid mb-4">
                <!-- Starter Website -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Web - Starter Website")'>
                    <i class="fas fa-laptop-code suggestion-card-icon"></i>
                    <h4>Starter Website</h4>
                    <div class="package-price-modal">R3,000 - R5,000</div>
                    <p>Perfect for small businesses and personal brands</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Up to 5 pages</li>
                            <li>Responsive design</li>
                            <li>Contact form</li>
                            <li>Basic SEO</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Professional Website -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Web - Professional Website")'>
                    <i class="fas fa-globe suggestion-card-icon"></i>
                    <h4>Professional Website</h4>
                    <div class="package-price-modal">R6,000 - R12,000</div>
                    <p>Ideal for growing companies needing advanced features</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Up to 15 pages</li>
                            <li>Custom design</li>
                            <li>CMS integration</li>
                            <li>E-commerce ready</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Enterprise Platform -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Web - Enterprise Platform")'>
                    <i class="fas fa-server suggestion-card-icon"></i>
                    <h4>Enterprise Platform</h4>
                    <div class="package-price-modal">R16,000+</div>
                    <p>Custom web applications for complex business needs</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Unlimited pages</li>
                            <li>Custom features</li>
                            <li>API development</li>
                            <li>24/7 support</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>
            </div>

            <h5 class="individual-products-header mb-3">
                <i class="fas fa-puzzle-piece me-2"></i>Additional Services
            </h5>

            <div class="custom-options-checkboxes">
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Web - E-commerce")'>
                    <label>
                        <i class="fas fa-shopping-cart"></i>
                        <span>E-commerce Website</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Web - CMS")'>
                    <label>
                        <i class="fas fa-edit"></i>
                        <span>Content Management System</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Web - Custom Application")'>
                    <label>
                        <i class="fas fa-cogs"></i>
                        <span>Custom Web Application</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Web - Landing Page")'>
                    <label>
                        <i class="fas fa-file-alt"></i>
                        <span>Landing Page Design</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Web - Website Redesign")'>
                    <label>
                        <i class="fas fa-paint-brush"></i>
                        <span>Website Redesign</span>
                    </label>
                </div>
            </div>

            <div class="modal-footer-actions mt-4">
                <button class="btn btn-secondary" @onclick="CloseWebDevModal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
                <button class="btn btn-primary" @onclick='() => OpenContactModalWithService("Web - Custom Application")'>
                    <i class="fas fa-rocket me-2"></i>Get Custom Quote
                </button>
            </div>
        </div>
    </BodyTemplate>
</Modal>

<!-- Mobile Apps Service Modal -->
<Modal @ref="mobileAppsModal" Title="Mobile Application Development" Size="ModalSize.ExtraLarge" IsScrollable="true">
    <BodyTemplate>
        <div class="service-modal-content">
            <div class="modal-intro">
                <p class="lead">Native and cross-platform mobile applications for iOS and Android. Engage your customers with powerful mobile experiences.</p>
            </div>

            <h4 class="packages-header mb-4">
                <i class="fas fa-box-open me-2"></i>Available Packages
            </h4>

            <div class="custom-suggestions-grid mb-4">
                <!-- Basic App -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Mobile - Basic App")'>
                    <i class="fas fa-mobile suggestion-card-icon"></i>
                    <h4>Basic App</h4>
                    <div class="package-price-modal">R4,000 - R8,000</div>
                    <p>Simple mobile application for single platform</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>iOS or Android</li>
                            <li>Up to 10 screens</li>
                            <li>User authentication</li>
                            <li>Push notifications</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Professional App -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Mobile - Professional App")'>
                    <i class="fas fa-tablet-alt suggestion-card-icon"></i>
                    <h4>Professional App</h4>
                    <div class="package-price-modal">R10,000 - R20,000</div>
                    <p>Cross-platform solution for both iOS and Android</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>iOS & Android</li>
                            <li>Up to 25 screens</li>
                            <li>Custom UI/UX</li>
                            <li>Payment integration</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Enterprise App -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Mobile - Enterprise App")'>
                    <i class="fas fa-mobile-alt suggestion-card-icon"></i>
                    <h4>Enterprise App</h4>
                    <div class="package-price-modal">R25,000+</div>
                    <p>Full-featured platform with advanced capabilities</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Native iOS & Android</li>
                            <li>Unlimited screens</li>
                            <li>AI/ML integration</li>
                            <li>Priority support</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>
            </div>

            <h5 class="individual-products-header mb-3">
                <i class="fas fa-puzzle-piece me-2"></i>Platform Options
            </h5>

            <div class="custom-options-checkboxes">
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Mobile - Cross-Platform")'>
                    <label>
                        <i class="fas fa-code"></i>
                        <span>Cross-Platform Solution</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Mobile - iOS Only")'>
                    <label>
                        <i class="fab fa-apple"></i>
                        <span>iOS App Development</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Mobile - Android Only")'>
                    <label>
                        <i class="fab fa-android"></i>
                        <span>Android App Development</span>
                    </label>
                </div>
            </div>

            <div class="modal-footer-actions mt-4">
                <button class="btn btn-secondary" @onclick="CloseMobileAppsModal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
                <button class="btn btn-primary" @onclick='() => OpenContactModalWithService("Mobile - Cross-Platform")'>
                    <i class="fas fa-rocket me-2"></i>Get Custom Quote
                </button>
            </div>
        </div>
    </BodyTemplate>
</Modal>

<!-- Cloud & AI Service Modal -->
<Modal @ref="cloudAiModal" Title="Cloud & AI Solutions" Size="ModalSize.ExtraLarge" IsScrollable="true">
    <BodyTemplate>
        <div class="service-modal-content">
            <div class="modal-intro">
                <p class="lead">Cloud computing and artificial intelligence integration to modernize your business operations and gain competitive advantage.</p>
            </div>

            <h4 class="packages-header mb-4">
                <i class="fas fa-box-open me-2"></i>Available Packages
            </h4>

            <div class="custom-suggestions-grid mb-4">
                <!-- Cloud Essentials -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Cloud - Essentials")'>
                    <i class="fas fa-cloud suggestion-card-icon"></i>
                    <h4>Cloud Essentials</h4>
                    <div class="package-price-modal">R3,000 - R6,000</div>
                    <p>Basic cloud setup and migration services</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Cloud hosting setup</li>
                            <li>Basic migration</li>
                            <li>Storage solutions</li>
                            <li>Security setup</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- AI Integration -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Cloud - AI Integration")'>
                    <i class="fas fa-robot suggestion-card-icon"></i>
                    <h4>AI Integration</h4>
                    <div class="package-price-modal">R8,000 - R15,000</div>
                    <p>Integrate AI capabilities into your applications</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>AI model integration</li>
                            <li>Machine learning</li>
                            <li>Data analytics</li>
                            <li>Custom training</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>

                <!-- Enterprise Cloud -->
                <div class="suggestion-card" @onclick='() => OpenContactModalWithService("Cloud - Enterprise")'>
                    <i class="fas fa-server suggestion-card-icon"></i>
                    <h4>Enterprise Cloud</h4>
                    <div class="package-price-modal">R20,000+</div>
                    <p>Comprehensive cloud infrastructure and AI solutions</p>
                    <div class="suggestion-card-examples">
                        <strong>Includes:</strong>
                        <ul>
                            <li>Full cloud architecture</li>
                            <li>Advanced AI features</li>
                            <li>Scalable infrastructure</li>
                            <li>24/7 monitoring</li>
                        </ul>
                    </div>
                    <button class="btn btn-primary w-100 mt-3">
                        <i class="fas fa-file-invoice me-2"></i>Get Full Quote
                    </button>
                </div>
            </div>

            <h5 class="individual-products-header mb-3">
                <i class="fas fa-puzzle-piece me-2"></i>Additional Services
            </h5>

            <div class="custom-options-checkboxes">
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Cloud - Migration")'>
                    <label>
                        <i class="fas fa-exchange-alt"></i>
                        <span>Cloud Migration Services</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Cloud - Hosting Setup")'>
                    <label>
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Cloud Hosting Setup</span>
                    </label>
                </div>
                <div class="custom-checkbox-item" @onclick='() => OpenContactModalWithService("Cloud - Database")'>
                    <label>
                        <i class="fas fa-database"></i>
                        <span>Database Solutions</span>
                    </label>
                </div>
            </div>

            <div class="modal-footer-actions mt-4">
                <button class="btn btn-secondary" @onclick="CloseCloudAiModal">
                    <i class="fas fa-times me-2"></i>Close
                </button>
                <button class="btn btn-primary" @onclick='() => OpenContactModalWithService("Cloud - Enterprise")'>
                    <i class="fas fa-rocket me-2"></i>Get Custom Quote
                </button>
            </div>
        </div>
    </BodyTemplate>
</Modal>

<div class="innotekso-site">
    <!-- Hero Section -->
    <section id="home" class="hero-section-clean">
        <div class="container hero-content-clean">
            <div class="hero-text-clean">
                <div class="logo-wrapper-clean fade-in">
                    <h1 class="brand-logo-clean">
                        <span class="logo-inn">inn</span>
                        <span class="logo-icon-clean">
                            <img src="/images/icon2.webp" alt="Innotekso icon" class="logo-image-clean">
                        </span>
                        <span class="logo-tekso">tekso</span>
                    </h1>
                    <p class="brand-tagline-clean">INNOVATION MEETS TECHNOLOGY</p>
                </div>

                <div class="hero-description-clean fade-in-delay">
                    <h2 class="hero-headline">
                        Let’s bring your idea to life
                    </h2>
                    <p class="hero-subtext">
                        From intelligent home automation to cutting-edge software solutions,
                        we bring innovation to South Africa's doorstep. Experience the future of living
                        and working with our comprehensive technology services.
                    </p>
                </div>

                <div class="hero-actions-clean fade-in-delay-2">
                    <button @onclick="OpenContactModal" class="btn-hero-primary" aria-label="Get started with Innotekso">
                        <i class="fas fa-rocket me-2"></i>
                        Get Free Quote
                    </button>
                    <button @onclick="ScrollToServices" class="btn-hero-secondary" aria-label="View our services">
                        <i class="fas fa-th me-2"></i>
                        View Services
                    </button>
                </div>

                <div class="hero-features">
                    <div class="hero-feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Professional Installation</span>
                    </div>
                    <div class="hero-feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Transparent Pricing</span>
                    </div>
                    <div class="hero-feature-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Local SA Support</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="scroll-indicator-clean">
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <!-- Services Overview Section -->
    <section id="services" class="services-section-clean">
        <div class="container">
            <div class="section-header-clean">
                <h2 class="section-title-clean animate-on-scroll">Our Services</h2>
                <p class="section-subtitle-clean animate-on-scroll">
                    Complete technology solutions for homes and businesses
                </p>
            </div>

            <div class="services-grid-clean">
                @foreach (var service in ServicesList)
                {
                    <div class="service-card-clean animate-on-scroll">
                        <div class="service-icon-clean">
                            <i class="@service.IconClass"></i>
                        </div>
                        <h3 class="service-title-clean">@service.Title</h3>
                        <p class="service-description-clean">@service.Description</p>
                        <button class="btn-service-learn" @onclick="() => OpenServiceModal(service.Id)">
                            Learn More <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                }
            </div>
        </div>
    </section>

    <!-- Why Choose Us Section -->
    <section class="why-choose-section-enhanced">
        <div class="container">
            <div class="section-header-clean animate-on-scroll">
                <h2 class="section-title-clean">Why Choose Innotekso?</h2>
                <p class="section-subtitle-clean">
                    Qualified, Certified Professionals Delivering Excellence
                </p>
            </div>

            <div class="why-choose-grid-enhanced">
                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-award"></i>
                        </div>
                    </div>
                    <h3>Certified Professionals</h3>
                    <p>Microsoft Azure certified developers and qualified technicians with years of industry experience delivering high-quality solutions</p>
                    <div class="why-badge">Certified</div>
                </div>

                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                    </div>
                    <h3>Local SA Support</h3>
                    <p>Based in Krugersdorp & Pretoria - providing personalized service with local knowledge and FREE installation in our service areas</p>
                    <div class="why-badge">Local</div>
                </div>

                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                    </div>
                    <h3>Quality Guaranteed</h3>
                    <p>All installations come with warranties and ongoing support to ensure your complete satisfaction and peace of mind</p>
                    <div class="why-badge">Guaranteed</div>
                </div>

                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <h3>Transparent Pricing</h3>
                    <p>Clear, upfront pricing with no hidden costs. You know exactly what you're paying for before we start any work</p>
                    <div class="why-badge">Honest</div>
                </div>

                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                    </div>
                    <h3>Custom Solutions</h3>
                    <p>Every project is tailored to your specific needs and budget, not one-size-fits-all. Your vision, our expertise</p>
                    <div class="why-badge">Tailored</div>
                </div>

                <div class="why-item-enhanced animate-on-scroll">
                    <div class="why-icon-wrapper">
                        <div class="why-icon-enhanced">
                            <i class="fas fa-headset"></i>
                        </div>
                    </div>
                    <h3>Ongoing Support</h3>
                    <p>Comprehensive after-sales support and maintenance to keep your systems running smoothly long after installation</p>
                    <div class="why-badge">24/7</div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section id="contact" class="cta-section-clean">
        <div class="container">
            <div class="cta-content-clean animate-on-scroll">
                <h2 class="cta-title-clean">Ready to Get Started?</h2>
                <p class="cta-text-clean">
                    Get a free, no-obligation quote for your smart home or software project.
                    Our certified team is ready to help bring your vision to life.
                </p>

                <button @onclick="OpenContactModal" class="btn-cta-large">
                    <i class="fas fa-paper-plane"></i>
                    Get Your Free Quote
                </button>

                <div class="contact-info-clean">
                    <a href="tel:+27815538518" class="contact-item-clean">
                        <i class="fas fa-phone"></i>
                        <span>+27 81 553 8518</span>
                    </a>
                    <a href="mailto:peiso.innotekso@gmail.com" class="contact-item-clean">
                        <i class="fas fa-envelope"></i>
                        <span>peiso.innotekso@gmail.com</span>
                    </a>
                    <a href="https://wa.me/27815538518" target="_blank" rel="noopener noreferrer" class="contact-item-clean">
                        <i class="fab fa-whatsapp"></i>
                        <span>WhatsApp Us</span>
                    </a>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Footer -->
<Footer />

@code {
    private Modal contactModal = default!;
    private Modal smartHomeModal = default!;
    private Modal webDevModal = default!;
    private Modal mobileAppsModal = default!;
    private Modal cloudAiModal = default!;
    
    private ContactModel contactModel = new();
    private bool showSuccessMessage = false;
    private bool showErrorMessage = false;
    private string errorMessage = string.Empty;
    private bool isSubmitting = false;

    private List<ServiceInfo> ServicesList = new()
    {
        new ServiceInfo
        {
            Id = "smart-home",
            Title = "Smart Home Solutions",
            Description = "Transform your home with intelligent automation systems",
            IconClass = "fas fa-home fa-3x"
        },
        new ServiceInfo
        {
            Id = "web-development",
            Title = "Web Development",
            Description = "Professional websites and web applications",
            IconClass = "fas fa-laptop-code fa-3x"
        },
        new ServiceInfo
        {
            Id = "mobile-apps",
            Title = "Mobile Applications",
            Description = "Native and cross-platform mobile apps",
            IconClass = "fas fa-mobile-alt fa-3x"
        },
        new ServiceInfo
        {
            Id = "cloud-ai",
            Title = "Cloud & AI Solutions",
            Description = "Cloud computing and artificial intelligence integration",
            IconClass = "fas fa-cloud fa-3x"
        }
    };

    private async Task OpenContactModal()
    {
        contactModel = new ContactModel();
        showSuccessMessage = false;
        showErrorMessage = false;
        errorMessage = string.Empty;
        await contactModal.ShowAsync();
    }

    private async Task OpenContactModalWithService(string serviceName)
    {
        // Close any open service modals first
        await CloseAllServiceModals();
        
        contactModel = new ContactModel { ServiceType = serviceName };
        showSuccessMessage = false;
        showErrorMessage = false;
        errorMessage = string.Empty;
        await contactModal.ShowAsync();
    }

    private async Task CloseModal()
    {
        await contactModal.HideAsync();
    }

    private async Task ScrollToServices()
    {
        await JSRuntime.InvokeVoidAsync("eval", "document.getElementById('services').scrollIntoView({ behavior: 'smooth' })");
    }

    private async Task NavigateToService(string serviceId)
    {
        await JSRuntime.InvokeVoidAsync("eval", $"document.getElementById('{serviceId}').scrollIntoView({{ behavior: 'smooth' }})");
    }

    private async Task OpenServiceModal(string serviceId)
    {
        switch (serviceId)
        {
            case "smart-home":
                await smartHomeModal.ShowAsync();
                break;
            case "web-development":
                await webDevModal.ShowAsync();
                break;
            case "mobile-apps":
                await mobileAppsModal.ShowAsync();
                break;
            case "cloud-ai":
                await cloudAiModal.ShowAsync();
                break;
        }
    }

    private async Task CloseAllServiceModals()
    {
        await smartHomeModal.HideAsync();
        await webDevModal.HideAsync();
        await mobileAppsModal.HideAsync();
        await cloudAiModal.HideAsync();
    }

    private async Task CloseSmartHomeModal()
    {
        await smartHomeModal.HideAsync();
    }

    private async Task CloseWebDevModal()
    {
        await webDevModal.HideAsync();
    }

    private async Task CloseMobileAppsModal()
    {
        await mobileAppsModal.HideAsync();
    }

    private async Task CloseCloudAiModal()
    {
        await cloudAiModal.HideAsync();
    }

    private async Task HandleValidSubmit()
    {
        isSubmitting = true;
        showErrorMessage = false;
        errorMessage = string.Empty;
        StateHasChanged();

        try
        {
            Console.WriteLine($"Sending quote request for: {contactModel.FirstName} {contactModel.LastName}");

            var emailSent = await EmailService.SendQuoteRequestAsync(contactModel);

            if (emailSent)
            {
                Console.WriteLine("Email sent successfully!");
                showSuccessMessage = true;
                StateHasChanged();

                await Task.Delay(3000);
                await contactModal.HideAsync();

                showSuccessMessage = false;
                contactModel = new ContactModel();
            }
            else
            {
                Console.WriteLine("Email sending failed");
                showErrorMessage = true;
                errorMessage = "Failed to send your message. Please try again or contact us directly at peiso.innotekso@gmail.com";
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
            showErrorMessage = true;
            errorMessage = "An unexpected error occurred. Please try again or contact us directly.";
        }
        finally
        {
            isSubmitting = false;
            StateHasChanged();
        }
    }

    private class ServiceInfo
    {
        public string Id { get; set; } = string.Empty;
        public string Title { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
        public string IconClass { get; set; } = string.Empty;
    }
}
